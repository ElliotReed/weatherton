(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();function ye(e,t=50){const n="Your browser does not support HTML5 Canvas.",s="#FCF4F1",o="#444444",i=t/2,u=document.createElement("canvas"),a=t/5,r=u.getContext("2d"),l=t/25,g=t/25,E=4,v=`${o}66`;u.textContent=n,u.setAttribute("class","compass"),u.setAttribute("width",t),u.setAttribute("height",t),r.translate(i,i),r.strokeStyle=`${s}cc`,r.fillStyle=`${s}cc`,r.lineWidth=1;function b(){const d=a+a/2.5,m=4;r.save();for(let f=0;f<m;f++)r.lineWidth=2,r.rotate(Math.PI/(m/2)),r.beginPath(),r.moveTo(0,0),r.lineTo(d,0),r.closePath(),r.stroke();r.restore()}function w(){const d=a-a/3,m=a+a/3,f=8;r.save();for(let h=0;h<f;h++)h%2!=0&&(r.beginPath(),r.moveTo(d,0),r.lineTo(m,0),r.closePath(),r.stroke()),r.rotate(Math.PI/(f/2));r.restore()}function x(){const d=a-a/3,m=a,f=16;r.save();for(let h=0;h<f;h++)h%2!=0&&(r.beginPath(),r.moveTo(d,0),r.lineTo(m,0),r.closePath(),r.stroke()),r.rotate(Math.PI/(f/2));r.restore()}function C(){const d=a-a/2,m=a+a/2,f=a*2-a/4;r.save(),r.font=`${d}px Arial`,r.textAlign="center",r.textBaseline="bottom",r.fillText("N",0,-m),r.textBaseline="top",r.fillText("S",0,m),r.textBaseline="middle",r.fillText("E",f,0),r.fillText("W",-f,0),r.restore()}function P(){const d=a/4;r.save(),r.shadowOffsetX=l,r.shadowOffsetY=g,r.shadowBlur=E,r.shadowColor=v,r.beginPath(),r.lineWidth=d,r.arc(0,0,a,0,Math.PI*2,!0),r.closePath(),r.stroke(),r.lineWidth=.5,r.strokeStyle=o,r.stroke(),r.restore()}function p(){const d=a/2,m=a/2,f=a/4,h=s,$=o;r.save(),r.rotate(e*Math.PI/180),r.beginPath(),r.moveTo(0,-f),r.lineTo(-d,-m),r.lineTo(0,a),r.lineTo(d,-m),r.closePath(),r.fillStyle=h,r.fill(),r.strokeStyle=$,r.lineWidth=1,r.stroke(),r.restore()}return t>50&&(x(),w(),C(),b()),P(),p(),u}function ge(e,t=50){const n="#fcfcfc",s="#ececec",o=t/10*5.5,i=t/10,u=t*2/3,a=t/5,r=document.createElement("canvas"),l=r.getContext("2d"),g="Your browser does not support HTML5 canvas",E="Arial",v="#441414",b=(e-950)*.01;r.textContent=g,r.setAttribute("class","barometer"),r.setAttribute("width",t),r.setAttribute("height",t),l.strokeStyle=n,l.fillStyle=n,l.textAlign="center",l.baseline="bottom";function w(){return a+o+o*b*-1}function x(){const p=["body","hole"],d=i/3,m=i/3,f=4,h="#22222266";function $(){for(let y=0;y<p.length;y++){l.save();let T=i/2;p[y]==="body"&&(l.shadowOffsetX=d,l.shadowOffsetY=m,l.shadowBlur=f,l.shadowColor=h),p[y]==="hole"&&(l.fillStyle=s,T=T*.618),l.beginPath(),l.arc(u+i/2,a,T,0,Math.PI,!0),l.fill(),l.closePath(),l.restore()}}function _(){let y=i/1.38;const T=a+o+y/1.5;for(let L=0;L<p.length;L++)l.save(),p[L]==="body"&&(l.shadowOffsetX=d,l.shadowOffsetY=m,l.shadowBlur=f,l.shadowColor=h),p[L]==="hole"&&(l.fillStyle=v,y=y*.618),l.beginPath(),l.arc(u+i/2,T,y,0,Math.PI*2,!0),l.fill(),l.closePath(),l.restore()}function k(){for(let y=0;y<p.length;y++){let T=u,L=a,S=i,H=o;l.save(),p[y]==="body"&&(l.shadowOffsetX=d,l.shadowOffsetY=m,l.shadowBlur=f,l.shadowColor=h),p[y]==="hole"&&(l.fillStyle=s,S=i/2,T=u+i/4),l.fillRect(T,L,S,H),l.restore()}}function M(){l.save(),l.fillStyle=v,l.fillRect(u+i/3,a+o,i/4,o*b*-1),l.restore()}$(),_(),k(),M()}function C(){const p=i,d=w(),m=u-p/2;l.save(),l.beginPath(),l.moveTo(m,d),l.lineTo(m-p,d),l.stroke(),l.closePath(),l.restore()}function P(){const f=t/3,h=f,$=w(),_=$+14;let k=`${e}`;var M="mbar";l.save(),l.textBaseline="middle",t>50?(l.font=`12px ${E}`,l.fillText(k,f,$),l.font=`12px ${E}`,l.fillText(M,h,_)):(l.translate(t/2,t/2),l.rotate(-Math.PI/2),l.font=`12px ${E}`,l.fillText(k,0,-14/2)),l.restore()}return x(),C(),P(),r}function c(e,t,...n){const s=document.createElement(e);for(let o in t)s.setAttribute(o,t[o]);return n.forEach(o=>{typeof o=="string"?s.appendChild(document.createTextNode(o)):s.appendChild(o)}),s}function q(e){const t=new Date(e*1e3),n=t.getMinutes().toString().padStart(2,"0");let s,o="AM",i=t.getHours();return i>=12&&(o="PM"),i=i%12,i===0&&(i=12),s=`${i}:${n} ${o}`,s}function F(e,t,n){if(t===n)return e;switch(t){case"Kelvin":if(n==="Fahrenheit")return`${parseInt(e*9/5-459.67)}`;if(n==="Celsius")return`${parseInt(e-273.15)}`;case"Celsius":if(n==="Fahrenheit")return`${parseInt(e*9/5+32)}`;if(n==="Kelvin")return`${parseInt(e+273.15)}`;case"Fahrenheit":if(n==="Kelvin")return`${parseInt((e+459.67)*9/5)}`;if(n==="Celsius")return`${parseInt((e-32)*9/5)}`;break;default:return`${e}`}}function Z(e,t="m/s",n="mph"){return(t="m/s")&&(n="mph")?`${Math.floor(e*2.237)} mph`:`${e} m/s`}function Ee(e,t,n){const s={value:e,units:t};return(t="meters")&&(n="miles")&&(s.value=(e*621371e-9).toFixed(2),s.units=n),s}function ve(e){return(e*100).toFixed(0)}function re(e,t,n){const s={value:e,units:"mm"};return(n="inches")&&(s.value=(e*.0393701).toFixed(2),s.units=n),s}function be(e){let t={value:"",class:""};return e<3&&(t.value="low",t.class="low"),e>=3&&e<6&&(t.value="moderate",t.class="moderate"),e>=6&&e<8&&(t.value="high",t.class="high"),e>=8&&e<11&&(t.value="very high",t.class="very-high"),e>=11&&(t.value="extreme",t.class="extreme"),t}const we="/weatherton/assets/raindrop-69b2cc51.svg";function Te(e=[]){const t=c("button",{class:"notice-btn danger"},e[e.length-1].event),n=c("div",{class:"alert"},t),s=c("div",{class:"alert__container scrollbar"});return e.forEach(o=>{const i=I(o.end,{includesTime:!0}),u=I(o.start,{includesTime:!0}),a=c("span",{class:"txt-small"}," through "),r=c("div",{class:"alert__in-effect"},u,a,i),l=c("h5",{},o.sender_name),g=c("p",{},o.description),E=c("header",{class:"danger padding-box"},o.event),v=c("article",{},E,r,l,g);s.appendChild(v)}),n.appendChild(s),n}function xe(e){const t=c("span",{class:"label"},"cloudiness"),n=c("span",{class:"txt-semi-bold"},`${e}`);return c("p",{id:"cloudiness",class:"percent"},t,n)}function I(e,t={}){const{includesTime:n=!1,includesYear:s=!1,includesDay:o=!0}=t,i=e*1e3,u=new Date(i).getFullYear(),a=new Date(i).toDateString().split(" ")[0],r=new Date(i).toDateString().split(" ")[1],l=new Date(i).toDateString().split(" ")[2],g=new Date(e).getTime(),E=c("span",{class:"date-time__hour"},`${q(g)}`),v=c("span",{class:"date-time__year"},`${u}`),b=c("span",{class:"date-time__day-name"},a),w=c("span",{class:"date-time__day"},l);return c("time",{class:"date date-time",title:`${r} ${l}, ${u}`,datetime:`${r} ${l}, ${u}`},b,o?w:"",s?v:"",n?E:"")}function $e(e){const t=F(e,"Kelvin","Fahrenheit"),n=c("span",{class:"label"},"dew point"),s=c("span",{class:"txt-semi-bold"},`${t}`);return c("p",{id:"dew-point",class:"degree"},n,s)}function Le(e){const t=c("span",{class:"label"},"humidity"),n=c("span",{class:"txt-semi-bold"},`${e}`);return c("p",{id:"humidity",class:"droplet percent"},t,n)}function R(e,t=50){const n=ge(e,t);return c("div",{id:"pressure",class:"flex-center-all"},n)}function j(e){const t=c("img",{class:"raindroplet",src:we,alt:"",width:"16",height:"16"});return c("p",{id:"probability-precipitation",class:"txt-semi-bold percent"},t,`${ve(e)}`)}function W(e,t=!0){let n=e,s;typeof e=="object"&&(n=e["1h"]),s=re(n,"mm","inches");const o=c("span",{class:"label"},"rain"),i=c("span",{class:"units"},s.units),u=c("span",{class:"txt-semi-bold"},s.value);return c("p",{id:"rainfall",class:""},t?o:"",u,i)}function A(e,t=!0){let n=e,s;typeof e=="object"&&(n=e["1h"]),s=re(n,"mm","inches");const o=c("span",{class:"label"},"snow"),i=c("span",{class:"units"},s.units),u=c("span",{class:"txt-semi-bold"},s.value);return c("p",{id:"snowfall",class:""},t?o:"",u,i)}function Ce(e){const t=c("span",{class:"label"},"sunrise");return c("p",{class:"sunrise"},t,q(e))}function Pe(e){const t=c("span",{class:"label"},"sunset");return c("p",{class:"sunset"},t,q(e))}function ie(e,t){const n="degree";function s(r){return`${F(r,"Kelvin","Fahrenheit")}`}const o=c("span",{class:"temperature__slash"},"/"),i=c("span",{class:`${n} feels-like`,title:`Feels like ${s(t)}`},`${s(t)}`),u=c("span",{class:`${n} actual`,title:`Actual temperature ${s(e)}`},`${s(e)}`);return c("p",{class:"temperature temperature__paragraph"},u,o,i)}function le(e,t){if(typeof e=="object"||typeof t=="object"){console.error("WeatherData objects are not allowed, use DailyTemperature() instead");return}return ie(e,t)}function ce(e){const{temp:t,feels_like:n}=e;if(typeof t!="object"||typeof n!="object"){console.error("WeatherData objects are required, use createTemperatureElement() instead");return}const s=[{name:"morning",value:"morn"},{name:"day",value:"day"},{name:"evening",value:"eve"},{name:"night",value:"night"}],o=[];return s.forEach(u=>{const a=c("span",{class:"label"},u.name),r=c("p",{class:"daily-temp"},a,c("span",{},ie(t[u.value],n[u.value])));o.push(r)}),c("div",{class:"temperature-list"},o[0],o[1],o[2],o[3])}function ae(e){const t="degree",n=c("span",{class:"label"},"high/low"),s=c("span",{class:`${t} value temperature__min`},`/${F(e.min,"Kelvin","Fahrenheit")}`),o=c("span",{class:`${t} value`},`${F(e.max,"Kelvin","Fahrenheit")}`);return c("p",{class:"high-low"},n,o,s)}function N(e){const t=c("span",{class:"label"},"uv"),n=c("span",{class:"value"},`${e}`),s=c("p",{class:"uvi__index"},t,n),o=be(e),i=c("span",{class:"label"},"UV risk"),u=c("span",{class:"value"},`${o.value}`),a=c("p",{class:`uvi__risk ${o.class}`},i,u);return c("div",{class:"uvi"},s,a)}function ke(e){const t=Ee(e,"meters","miles"),n=c("span",{class:"label"},"visibility"),s=c("span",{class:"value"},t.value),o=c("span",{class:"units"},t.units);return c("p",{class:"visibility"},n,s,o)}function K(e){return c("p",{class:"description description-text txt-center"},`${e}`)}function Y(e,t="default"){const{icon:n,main:s,description:o}=e;let i="",u="50px";t==="large"&&(i="@2x",u="100px");let a=`https://openweathermap.org/img/wn/${n}${i}.png`;const r=`${s}: ${o}`;return c("div",{class:"icon-container",title:r},c("img",{class:"icon",src:a,alt:r,width:u,height:u}))}function U(e,t){const n=document.createElement("div"),s=document.createElement("p");return s.textContent=`${e}`,s.setAttribute("title",`${t}`),n.setAttribute("class","main"),n.appendChild(s),n}function G(e,t,n,s){const o=`${Z(n,"m/s","mph")}`;let i="";t!=null&&(i=`, gusts to ${Z(t,"m/s","mph")}`);const u=ye(e,s),a=c("span",{},i),r=c("p",{class:"speed"},o,a);return c("div",{class:"wind"},u,r)}const z={result:null,convertToOpacity(e){return this.result=(e/60).toFixed(2),this},invert(){return this.result=1-this.result,this}};function ee(e){return e.getMinutes()}function D(e){return 60-e}function Oe(e,t){const n=D(e),s=D(t);return n-s}function Q(e,t){const n=new Date(e);return n.setHours(n.getHours()-t),n}function _e(e,t){const n=Q(t,1);return e>n&&e<t}function Me(e,t){const n=Q(t,1);return e>n&&e<t}function Ie(e,t,n){const s=Q(n,1);return e>t&&e<s}function Se(e,t){return t?z.convertToOpacity(e).invert().result:z.convertToOpacity(e).result}function te(e,t,n=!1){const s=ee(e),o=ee(t);let i=o+D(s);return o>s&&(i=Oe(s,o)),Se(i,n)}function O(e){return new Date(e*1e3)}function ue(e){const{dt:t,sunrise:n,sunset:s}=e,o=O(t),i=O(n),u=O(s);let a=0;return Ie(o,i,u)&&(a=1),_e(o,i)&&(a=te(i,o)),Me(o,u)&&(a=te(u,o,!0)),a}function Be(e,t){const n=O(e.dt),s=O(t.current.sunrise),o=O(t.current.sunset);for(;s.getDate()<n.getDate();)s.setDate(s.getDate()+1),o.setDate(o.getDate()+1);return{dt:n.getTime()/1e3,sunrise:s.getTime()/1e3,sunset:o.getTime()/1e3}}const Fe=document.querySelectorAll(".forecast-container");let B=!1,ne,se;for(const e of Fe)e.addEventListener("mousedown",t=>{B=!0,e.classList.add("active"),ne=t.pageX-e.offsetLeft,se=e.scrollLeft}),e.addEventListener("mouseleave",()=>{B=!1,e.classList.remove("active")}),e.addEventListener("mouseup",()=>{B=!1,e.classList.remove("active")}),e.addEventListener("mousemove",t=>{if(!B)return;t.preventDefault();const s=(t.pageX-e.offsetLeft-ne)*3;e.scrollLeft=se-s});const We=document.getElementById("today-btn");We.addEventListener("click",J);const Ae=document.getElementById("hourly-btn");Ae.addEventListener("click",J);const Ye=document.getElementById("daily-btn");Ye.addEventListener("click",J);function J(e){const t=e.target,n=document.querySelectorAll(".display-feature"),s=document.querySelectorAll(".display-btn");function o(){s.forEach(i=>{i.name===t.name?t.classList.add("active"):i.classList.remove("active")})}n.forEach(i=>{i.id===t.name?(i.classList.add("display"),o()):i.classList.remove("display")})}const V=document.getElementById("scroll-left"),X=document.getElementById("scroll-right"),He=document.getElementById("forecast-feature__container");let de;V.addEventListener("mousedown",me);X.addEventListener("mousedown",me);He.addEventListener("mouseup",e=>{clearInterval(de),De()});function me(e){const t=document.querySelector(".display-feature.display > .forecast-container"),s=t.querySelector(".card").offsetWidth;function o(){e.target.id==="scroll-left"?t.scrollLeft-=s:t.scrollLeft+=s}o(),de=setInterval(o,600)}function De(){const e=document.querySelector(".display-feature.display > .forecast-container");e.scrollLeft===0?V.classList.add("noscroll"):V.classList.remove("noscroll"),e.scrollLeft+e.clientWidth===e.scrollWidth?X.classList.add("noscroll"):X.classList.remove("noscroll")}const Ve="http://localhost:3066/weatherton",Xe=document.documentElement,fe=document.getElementById("app-container");async function qe(){oe(),setInterval(()=>{getCurrentWeather(),oe()},10*60*1e3)}async function oe(){const e=await je();Ge(e)}function Re(){return new Promise(function(e,t){navigator.geolocation?navigator.geolocation.getCurrentPosition(e,t):fe.innerText="Geolocation is not supported by this browser"})}async function je(){const e=await Re(),t=Ne(e),n=Ke(t);return Ue(n)}function Ne(e){const t=e.coords.latitude,n=e.coords.longitude;return`lat=${t}&lon=${n}`}function Ke(e){return`${Ve}/?${e}`}function Ue(e){return fetch(e).then(n=>n.json()).then(n=>n).catch(n=>{fe.innerText=n.message})}function Ge(e){return Qe(e.alerts),Je(e.current),et(e.daily[0]),Ze(e),ze(e.daily),Xe.style.setProperty("--dayBackgroundOpacity",ue({dt:e.current.dt,sunrise:e.current.sunrise,sunset:e.current.sunset})),!0}function Qe(e){const t=`
    background:  #6ea0d2;
    color: #fcf4f1;
  `;if(!e){console.log("%c There are no weather alerts in this area.",t);return}const n=document.getElementById("alert"),s=Te(e);n.innerHTML="",n.appendChild(s)}function Je(e){const{clouds:t,dew_point:n,dt:s,feels_like:o,humidity:i,pressure:u,rain:a,snow:r,sunrise:l,sunset:g,temp:E,uvi:v,visibility:b,weather:w,wind_deg:x,wind_speed:C}=e,P=document.getElementById("current-weather__container");let p=w[0];const d=xe(t),m=I(s,{includesYear:!0,includesTime:!0}),f=K(p.description),h=$e(n),$=Le(i),_=Y(p,"large"),k=R(u,76),M=W(a),y=A(r),T=Ce(l),L=Pe(g),S=le(E,o),H=ke(b),pe=G(x,null,C,76),he=N(v);P.innerHTML="",P.append(m,_,S,f,e.snow!=null?y:"",e.rain!=null?M:"",k,pe,d,H,$,h,he,T,L)}function Ze(e){const t=document.getElementById("hourly-weather__container"),n=e.hourly;t.innerHTML="",n.map(s=>{const o=s.weather[0],i=I(s.dt,{includesTime:!0,includesDay:!1}),u=j(s.pop),a=W(s.rain),r=A(s.snow),l=Y(o),g=le(s.temp,s.feels_like);U(o.main,o.description),K(o.description);const E=G(s.wind_deg,s.wind_speed,s.wind_gust);R(s.pressure);const v=N(s.uvi),b=c("div",{class:"card"},i,l,g,u,s.snow!=null?r:"",s.rain!=null?a:"",E,v),w=Be(s,e),x=ue(w),C=`linear-gradient(to top, rgb(110 160 210 / ${x}), rgb(160 193 224 / ${x}))`;b.style.background=C,t.appendChild(b)})}function ze(e){const t=document.getElementById("daily-weather__container");t.innerHTML="",e.map(n=>{const s=n.weather[0],o=I(n.dt),i=ae(n.temp),u=W(n.rain),a=A(n.snow),r=j(n.pop),l=ce(n);U(s.main,s.descriptions);const g=N(n.uvi),E=K(s.description),v=Y(s),b=G(n);R(n.pressure,60);const w=c("div",{class:"card daily-forecast"},o,v,E,i,n.rain!=null?u:"",n.snow!=null?a:"",r,l,b,g);t.appendChild(w)})}function et(e){const t=document.getElementById("today-weather__container"),n=e.weather[0],s=Y(n),o=j(e.pop),i=W(e.rain),u=A(e.snow),a=ce(e),r=U(n.main,n.description),l=ae(e.temp),g=c("div",{class:"card today-forecast"},s,l,r,o,e.rain!=null?i:"",e.snow!=null?u:"",a);t.innerHTML="",t.appendChild(g)}qe();function tt(){document.querySelector(".alert__container").classList.toggle("display")}function nt(){const e=document.querySelector(".alert__container");e&&e.classList.remove("display")}document.addEventListener("click",e=>{if(e.target.classList.contains("notice-btn")){tt();return}nt()});
